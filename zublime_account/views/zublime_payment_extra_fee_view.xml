<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_view_l10n_mx_payment_method_form_inherit" model="ir.ui.view">
            <field name="name">l10n.mx.payment.method inherit</field>
            <field name="model">l10n_mx_edi.payment.method</field>
            <field name="inherit_id" ref="l10n_mx_edi.view_l10n_mx_payment_method_form"/>
            <field name="arch" type="xml">
                <field name="active" position="after">
                    <field name="tariff"/>
                    <field name="effective_type"/>
                </field>
            </field>
        </record>

        <record id="view_account_payment_register_form_inherit" model="ir.ui.view">
            <field name="name">account.payment.register inherit</field>
            <field name="model">account.payment.register</field>
            <field name="inherit_id" ref="account.view_account_payment_register_form"/>
            <field name="arch" type="xml">
                <label for="amount" position="before">
                    <label for="amount_due"
                           attrs="{'invisible': ['|', ('can_edit_wizard', '=', False), '&amp;', ('can_group_payments', '=', True), ('group_payment', '=', False)]}"/>
                    <div name="amount_div0" class="o_row"
                         attrs="{'invisible': ['|', ('can_edit_wizard', '=', False), '&amp;', ('can_group_payments', '=', True), ('group_payment', '=', False)]}">
                        <field name="amount_due" readonly="1" force_save="1"/>
                        <field name="currency_id"
                               options="{'no_create': True, 'no_open': True}"
                               groups="base.group_multi_currency"/>
                    </div>
                </label>
                <field name="payment_date" position="before">
                    <field name="fee" invisible="1"/>
                    <field name="effective_type" invisible="1"/>
                    <label for="tariff"
                           attrs="{'invisible': [('fee', '=', 0)]}"/>
                    <div name="amount_div1" class="o_row"
                         attrs="{'invisible': [('fee', '=', 0)]}">
                        %<field name="fee"/>=
                        <field name="tariff" readonly="1" force_save="1"/>
                        <field name="currency_id"
                               options="{'no_create': True, 'no_open': True}"
                               groups="base.group_multi_currency"/>
                    </div>
                    <field name="amount_fee" attrs="{'invisible': [('fee', '=', 0)]}" readonly="1" foce_save="1"/>
                    <field name="cash_received" attrs="{'invisible': [('effective_type', '=', False)]}"/>
                    <field name="change_return" attrs="{'invisible': [('effective_type', '=', False)]}"/>
                </field>
                 <xpath expr="//field[@name='journal_id']" position="after">
                        <field name="is_payment_fee" invisible="1"/>
                    </xpath>
                <xpath expr="//field[@name='l10n_mx_edi_payment_method_id']" position="replace">
                    <field name="l10n_mx_edi_payment_method_id"
                           attrs="{'invisible': [('country_code', '!=', 'MX')], 'required': [('country_code', '=', 'MX')]}"/>
                </xpath>
            </field>
        </record>

        <record id="view_account_payment_form_pa_inherit" model="ir.ui.view">
            <field name="name">account.payment inherit</field>
            <field name="model">account.payment</field>
            <field name="inherit_id" ref="account.view_account_payment_form"/>
            <field name="arch" type="xml">
                <field name="date" position="before">
                    <field name="fee" invisible="1"/>
                    <label for="tariff"
                           attrs="{'invisible': [('fee', '=', 0)]}"/>
                    <div name="amount_div1" class="o_row"
                         attrs="{'invisible': [('fee', '=', 0)]}">
                        <field name="fee"/> % =
                        <field name="tariff" readonly="1" force_save="1"/>
                    </div>
                    <field name="amount_fee" string="Total Amount" widget="monetary"
                           options="{'currency_field':'currency_id'}" attrs="{'invisible': [('fee', '=', 0)]}"/>
                </field>
            </field>
        </record>


        <!--        template-->
        <template id="report_header_custom" inherit_id="account.report_payment_receipt_document">
            <xpath expr="//div[@class='page']/div[3]" position="after">
                <div class="row mb64">
                    <div class="col-6" t-if="o.tariff">
                        <strong>Tarrif:</strong>
                        (<span t-field="o.fee"/> %) - <span t-field="o.tariff"
                                t-options="{'widget': 'monetary'}"/>
                    </div>
                    <div class="col-6" t-if="o.amount_fee">
                        <strong>Total Cobrado: </strong><span t-field="o.amount_fee" t-options="{'widget': 'monetary'}"/>
                    </div>
                </div>
            </xpath>
        </template>

    </data>
</odoo>